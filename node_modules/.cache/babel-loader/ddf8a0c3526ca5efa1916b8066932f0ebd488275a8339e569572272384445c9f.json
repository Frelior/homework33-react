{"ast":null,"code":"import{StyledForm}from\"./StyledForm\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{nanoid}from\"nanoid\";import{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TaskForm(_ref){let{setStorage}=_ref;const[focused,setFocused]=useState(false);//adding value from input to local storage\nfunction addTaskToLocalStorage(task){if(task.title){const tasks=JSON.parse(localStorage.getItem(\"tasks\"))||[];task.completed=false;task.id=nanoid(6);tasks.push(task);setStorage(tasks);localStorage.setItem(\"tasks\",JSON.stringify(tasks));}}const validationSchema=Yup.object({title:Yup.string().min(3,\"Title must be at least 3 characters long\").required(\"Title is required\")});return/*#__PURE__*/_jsx(StyledForm,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{title:\"\"},validationSchema:validationSchema,onSubmit:(values,_ref2)=>{let{resetForm}=_ref2;addTaskToLocalStorage(values);resetForm();},children:_ref3=>{let{errors,touched}=_ref3;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add new task\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Field,{name:\"title\",type:\"text\",className:\"form-control \".concat(focused&&errors.title&&touched.title&&\"is-invalid\"),placeholder:\"Enter title\",onFocus:()=>setFocused(true),onBlur:()=>setFocused(false)}),focused&&errors.title&&/*#__PURE__*/_jsx(ErrorMessage,{name:\"title\",component:\"div\",className:\"invalid-feedback\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-3\",children:\"Add\"})]});}})})})});}","map":{"version":3,"names":["StyledForm","Formik","Form","Field","ErrorMessage","Yup","nanoid","useState","jsx","_jsx","jsxs","_jsxs","TaskForm","_ref","setStorage","focused","setFocused","addTaskToLocalStorage","task","title","tasks","JSON","parse","localStorage","getItem","completed","id","push","setItem","stringify","validationSchema","object","string","min","required","children","className","initialValues","onSubmit","values","_ref2","resetForm","_ref3","errors","touched","name","type","concat","placeholder","onFocus","onBlur","component"],"sources":["C:/Users/admin/Documents/GitHub/les/homework33-react/src/homework35/Form/MyForm.jsx"],"sourcesContent":["import { StyledForm } from \"./StyledForm\"\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\"\r\nimport * as Yup from \"yup\"\r\nimport { nanoid } from \"nanoid\"\r\nimport { useState } from \"react\"\r\n\r\nexport default function TaskForm({ setStorage }) {\r\n  const [focused, setFocused] = useState(false)\r\n\r\n  //adding value from input to local storage\r\n  function addTaskToLocalStorage(task) {\r\n    if (task.title) {\r\n      const tasks = JSON.parse(localStorage.getItem(\"tasks\")) || []\r\n      task.completed = false\r\n      task.id = nanoid(6)\r\n      tasks.push(task)\r\n      setStorage(tasks)\r\n      localStorage.setItem(\"tasks\", JSON.stringify(tasks))\r\n    }\r\n  }\r\n\r\n  const validationSchema = Yup.object({\r\n    title: Yup.string()\r\n      .min(3, \"Title must be at least 3 characters long\")\r\n      .required(\"Title is required\"),\r\n  })\r\n\r\n  return (\r\n    <StyledForm>\r\n      <div className={\"card\"}>\r\n        <div className=\"card-body p-0\">\r\n          <Formik\r\n            initialValues={{ title: \"\" }}\r\n            validationSchema={validationSchema}\r\n            onSubmit={(values, { resetForm }) => {\r\n              addTaskToLocalStorage(values)\r\n              resetForm()\r\n            }}\r\n          >\r\n            {({ errors, touched }) => {\r\n              return (\r\n                <Form>\r\n                  <h4>Add new task</h4>\r\n                  <div>\r\n                    <Field\r\n                      name=\"title\"\r\n                      type=\"text\"\r\n                      className={`form-control ${\r\n                        focused && errors.title && touched.title && \"is-invalid\"\r\n                      }`}\r\n                      placeholder=\"Enter title\"\r\n                      onFocus={() => setFocused(true)}\r\n                      onBlur={() => setFocused(false)}\r\n                    ></Field>\r\n                    {focused && errors.title && (\r\n                      <ErrorMessage\r\n                        name=\"title\"\r\n                        component=\"div\"\r\n                        className={`invalid-feedback`}\r\n                      />\r\n                    )}\r\n                  </div>\r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary mt-3\"\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </Form>\r\n              )\r\n            }}\r\n          </Formik>\r\n        </div>\r\n      </div>\r\n    </StyledForm>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}